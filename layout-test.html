<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="data/data.js"></script>

  <link rel="stylesheet" type="text/css" href="styles/index-list.css">
  <!-- he de fer que les imatges del fons carreguin on-load; -->
  <!-- potser puc fer-ho carregant-les en un div que estigui en mode display: none -->
  <style> /*general styling*/
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    * {
      font-family: 'Montserrat', sans-serif;
      margin: 0px; padding: 0px;
    }
    :root {
      --color: #ffc107;
    }
    * {
      box-sizing: border-box;
    }
    figure > div{ width: 71vw; overflow-x: scroll}
    p {margin-top: 1em;}
    figcaption {
      font-size: small;
    }
    .table-list li {
      margin-top: 1em;
    }
    .arrow-img {
      width: 1.8em;
    }

    h3 {
      margin-top: 1em;
    }
    .content li {
      margin-left: 1em;
      margin-top: 1em;
    }
  </style>
</head>
<body style="margin: 0; overflow-x: hidden; overflow-y: hidden">
  <header style="height: 15vh; background-color: white; position: relative; top: 0; z-index: 5;">
    <div id="logo" style="width: fit-content; margin: auto; height: 100%">
      <img src="https://associacioesclat.com/wp-content/uploads/2018/07/associacio-esclat-logo.png" alt="logotip d'esclat grup social" style="height: 100%">
    </div>
  </header>

  <div style="display: flex; height: 85vh; border-top: 1px solid gainsboro; background-color: gainsboro">
    <nav style="overflow: scroll; width: 25vw; position: relative; z-index: 5; border-right: 1px solid gainsboro; background-color: white">
      <ul class="index">
        <li> <a>1. Part estratègica</a>
        <ul class="index">
          <li><a>1.1. Introducció</a>
            <ul class="index">
              <li><a id="myLink">1.1.1. Enllaç estratègia digital de centre (EDC)</a></li>
              <li><a>1.1.2. Contextualització</a></li>
              <li><a>1.1.3. Visió del centre</a></li>
              <li><a>1.1.4. Infraestructura</a></li>
              <li><a>1.1.5. Pràctiques del centre d’ús i aplicació de la tecnologia</a></li>
              <li><a>1.1.6. Procés d’elaboració</a></li>
              <li><a>1.1.7. Integració de l’Estratègia Digital de Centre al Projecte</a></li>
            </ul>
          </li>
          <li><a>1.2. Diagnosi</a>
            <ul class="index">
              <li><a>1.2.1. Eines utilitzades en la diagnosi</a></li>
              <li><a>1.2.2. Aspectes destacats</a></li>
              <li><a>1.2.3. Objectius</a></li>
            </ul>
          </li>
          <li><a>1.3. Planificació de les activitats a desenvolupar</a>
            <ul class="index">
              <li><a>1.3.1. Descripció i temporització</a></li>
            </ul>
          </li>
          <li><a>1.4. Avaluació</a></li>
        </ul>
        </li>
        <li> <a>2. Cultura digital</a>
          <ul class="index">
            <li><a>2.1. Documentació del centre</a>
              <ul class="index">
                <li><a>2.1.1. PEC</a></li>
                <li><a>2.1.2. NOFC</a></li>
              </ul>
            </li>
            <li><a>2.2 Pla d'acollida digital</a>
              <ul class="index">
                <li><a>2.2.1. Docents</a></li>
                <li><a>2.2.2. Alumnat i families</a></li>
              </ul>
            </li>
            <li><a>2.3. Pla de comunicació del centre</a>
              <ul class="index">
                <li><a>2.3.1. Portal web</a></li>
                <li><a>2.3.2. Xarxes</a></li>
                <li><a>2.3.3. Comunicació amb les famílies</a></li>
                <li><a>2.3.4. Comunicació amb els docents</a></li>
              </ul>
            </li>

            <li><a>2.4. Inventari digital</a>
              <ul class="index">
                <li><a>2.4.1. Equipament informàtic</a></li>
                <li><a>2.4.2. Robòtica</a></li>
                <li><a>2.4.3. Impressió</a></li>
              </ul>
            </li>
          </ul>
          </li>
      </ul>
    </nav>

  <div id="container" style=" overflow-y: scroll; overflow-x: hidden; background-size: cover; background-image: url('https://www.viaempresa.cat/uploads/s1/20/57/77/00/foto1-esclat-tossa-de-mar_11_640x380.jpeg')">
    <main style="min-height: 85vh; background-color: white;  position: relative; z-index: 0; width: 75vw;
    left: 0vw; top: 0px;
    transition: left 0.3s ease-out, top 0.3s ease-out;
    padding: 1.5em
    ">
      <div style="display: flex; justify-content: space-between; margin-bottom: 1em;">
        <img class="prev-arrow arrow-img" style="transform: rotate(180deg);" src="arrow.svg" alt="previous section">
        <img class="next-arrow arrow-img" src="arrow.svg" alt="next section">
      </div>

      <div style="max-width: 70ch">
        <h4 style="color: rgb(235, 103, 45)"></h4>
        <h2></h2>
        <div class="content">
          <h1>Estratègia digital d'Esclat Grup Social</h1>
          <p>Clica a l'índex o a les fletxes per a navegar</p>
        </div>

      </div>
    </main>
  </div>
  </div>
</body>
</html>



<script>
  main = document.querySelector("main")
  mainWidth = main.style.width
  initialTransition = main.style.transition



  function transitionY() {
    mainHeight = document.querySelector("main").offsetHeight
    setTimeout(function() {
      main.style.transition = "left 0.27s ease-out, top 0.27s ease-out"
      main.style.top = "-" + mainHeight + "px"
      // main.style.maxHeight = "85vh"
      main.style.overflow = "hidden"
    }, 0);
    setTimeout(function() {
      main.style.transition = "left 0s ease-out, top 0s ease-out"
      main.style.top = mainHeight + "px"
    }, 400);
    setTimeout(() => {
      main.style.transition = initialTransition
      main.style.top = "0px"
    }, 800);
    changeBackgroundImage()
  }

  document.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', transitionY);
  });

  document.querySelector(".prev-arrow").addEventListener('click', prevArticle)
  document.querySelector(".next-arrow").addEventListener('click', nextArticle)
  function prevArticle() {

    function transitionLeft() {
      main.style.left = mainWidth
      setTimeout(function() {
        main.style.transition = "left 0s ease-out"
        main.style.left = "-" + mainWidth
      }, 400);
      setTimeout(() => {
        main.style.transition = initialTransition
        main.style.left = "0vw"
      }, 800);
      changeBackgroundImage()
    }
    transitionLeft()

    setTimeout(function() {
      let currentIndex = parseInt(sections.find((element) => document.querySelector("h2").textContent === element.title).index)
       if (currentIndex > 111 && currentIndex < 118 || currentIndex > 121 && currentIndex < 124 || currentIndex == 222 || currentIndex > 231 && currentIndex < 235 || currentIndex > 241 && currentIndex < 244){
        setSection(currentIndex - 1)}else{
          switch (currentIndex) {
            case 241:
              setSection(234);
              break;
            case 231:
              setSection(222);
              break;
            case 221:
              setSection(21);
              break;
            case 21:
              setSection(2);
              break;
            case 2:
              setSection(14);
              break;
            case 14:
              setSection(131);
              break;
            case 131:
              setSection(123);
              break;
            case 121:
              setSection(117);
          }
        }
    }, 400);
  }
  function nextArticle() {

    function transitionRight() {
      main.style.left = "-" + mainWidth
      setTimeout(function() {
        main.style.transition = "left 0s ease-out"
        main.style.left = mainWidth
      }, 400);

      setTimeout(() => {
        main.style.transition = initialTransition
        main.style.left = "0vw"
      }, 800);
      changeBackgroundImage()
    }
    transitionRight()

    setTimeout(function() {
      let currentIndex = parseInt(sections.find((element) => document.querySelector("h2").textContent === element.title).index)
       if (currentIndex >= 111 && currentIndex < 117 || currentIndex >= 121 && currentIndex < 123 || currentIndex >= 231 && currentIndex < 234 || currentIndex >= 241 && currentIndex < 244 || currentIndex == 221){
        setSection(currentIndex + 1)}else{
          switch (currentIndex) {
            case 117:
              setSection(121);
              break;
            case 123:
              setSection(13);
              break;
            case 13:
              setSection(131);
              break;
            case 131:
              setSection(14);
              break;
            case 14:
              setSection(2);
              break;
            case 2:
              setSection(21);
              break;
            case 21:
              setSection(221);
              break;
            case 222:
              setSection(231);
              break;
            case 234:
              setSection(241);
              break;
          }
        }
    }, 400);
  }
  document.addEventListener('keydown', function(event) {
    if (event.code === 'ArrowLeft') {
      prevArticle()
    }
    if (event.code === 'ArrowRight') {
      nextArticle()
    }
  });




  function setSection(index) {
    let matchedElement = sections.find((element) => index === element.index);

    document.querySelectorAll("li").forEach(element => {
      if(element.innerText == matchedElement.title){element.style.backgroundColor ="gainsboro"} else [element.style.backgroundColor ="white"]
    })

    document.querySelector("h2").innerText = matchedElement.title
    document.querySelector(".content").innerHTML = matchedElement.content
    document.querySelector("h4").innerText = (function supratitle() {
      switch (matchedElement.title.substring(0, 3)) {
        case "1.1":
          return "1. Part estratègica > 1.1. Introducció"
        case "1.2":
          return "1. Part estratègica > 1.2. Diagnosi"
        case "1.3":
        case "1.4":
          if(matchedElement.index==13 || matchedElement.index==14){
            return "1. Part estratègica"
          }else{
            return "1. Part estratègica > 1.3. Planificació de les activitats a desenvolupar "
          }
        case "2. ":
          return ""
        case "2.1":
        if(matchedElement.index==21){
          return "2. Cultura digital"} else {
          return "2. Cultura digital > 2.1. Documentació del centre"};
        case "2.2":
          return "2. Cultura digital > 2.2. Pla d'acollida digital";
        case "2.3":
          return "2. Cultura digital > 2.3. Pla de comunicació del centre";
        case "2.4":
          return "2. Cultura digital > 2.4. Inventari digital"
      }
      return ""
    })();
  }



currentImageIndex = 0
  function changeBackgroundImage() {
    images =
    ["images/background/bg (1).jpg",
    "images/background/bg (2).jpg",
    "images/background/bg (3).jpg",
    "images/background/bg (4).jpg"]
    if(currentImageIndex == images.length){currentImageIndex = 0}
    url = images[currentImageIndex]
    document.querySelector("#container").style.backgroundImage = "url('" + url + "')"
    currentImageIndex += 1
  }
</script>

<script>
  function indexClick(event) {
    event.preventDefault();
    const linkText = event.target.innerText;
    let matchedElement = sections.find((element) => linkText === element.title);
    if(matchedElement){} else {
      switch (linkText.substring(0, 3)){
      case "1. ":
      case "1.1":
        matchedElement = sections.find((element) => "1.1.1. Enllaç estratègia digital de centre (EDC)" === element.title);
        break;
      case "1.2":
        matchedElement = sections.find((element) => "1.2.1. Eines utilitzades en la diagnosi" === element.title);
        break;
      case "1.3":
        matchedElement = sections.find((element) => "1.3.1. Descripció i temporització" === element.title);
        break;
      case "2.1":
        matchedElement = sections.find((element) => "2.1. Documentació del centre" === element.title);
        break;
      case "2.2":
        matchedElement = sections.find((element) => "2.2.1. Docents" === element.title);
        break;
      case "3. ":
        matchedElement = sections.find((element) => "2.3.1. Portal web" === element.title);
        break;
      case "4. ":
        matchedElement = sections.find((element) => "2.4.1. Equipament informàtic" === element.title);
        break;
      }
    }
    if (matchedElement) {
      setTimeout(function() {
        document.querySelector("h2").innerText = matchedElement.title
        document.querySelector(".content").innerHTML = matchedElement.content
        document.querySelector("h4").innerText = (function supratitle() {
           switch (matchedElement.title.substring(0, 3)) {
            case "1.1":
              return "1. Part estratègica > 1.1. Introducció"
            case "1.2":
              return "1. Part estratègica > 1.2. Diagnosi"
            case "1.3":
            case "1.4":
              if(matchedElement.index==13 || matchedElement.index==14){
                return "1. Part estratègica"
              }else{
                return "1. Part estratègica > 1.3. Planificació de les activitats a desenvolupar "
              }
            case "2. ":
              return ""
            case "2.1":
            if(matchedElement.index==21){
              return "2. Cultura digital"} else {
              return "2. Cultura digital > 2.1. Documentació del centre"};
            case "2.2":
              return "2. Cultura digital > 2.2. Pla d'acollida digital";
            case "2.3":
              return "2. Cultura digital > 2.3. Pla de comunicació del centre";
            case "2.4":
              return "2. Cultura digital > 2.4. Inventari digital"
             }
             return ""
           })();
        // document.querySelector(".content").innerHTML = matchedElement.content
      }, 400);
    }
    document.querySelectorAll("li").forEach(element => {
      if(element.innerText == matchedElement.title){element.style.backgroundColor ="gainsboro"} else [element.style.backgroundColor ="white"]
    })

  }
  const indexElement = document.querySelector('.index');
  const links = indexElement.querySelectorAll('a');
  links.forEach((link) => {
    link.addEventListener('click', indexClick);
  });

</script>
